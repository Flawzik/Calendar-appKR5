<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–Ω—è</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h1>
  <div id="events"></div>

  <h2>–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h2>
  <form id="addEventForm">
    <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
    <input type="text" id="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
    <input type="time" id="time" value="09:00">
    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
  </form>

  <script>
    async function loadEvents() {
      const res = await fetch('/api/events');
      const events = await res.json();
      const container = document.getElementById('events');
      container.innerHTML = events.length > 0 
        ? events.map(e => `<div><strong>${e.time}</strong> ‚Äî ${e.title} (${e.description})</div>`).join('')
        : '<p>–ù–∞ —Å–µ–≥–æ–¥–Ω—è —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç.</p>';
    }

    document.getElementById('addEventForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const description = document.getElementById('description').value;
      const time = document.getElementById('time').value;

      const res = await fetch('/api/events', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, description, time })
      });

      if (res.ok) {
        alert('–°–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ!');
        document.getElementById('addEventForm').reset();
        loadEvents();
      }
    });

    loadEvents();
  </script>
</body>
</html>